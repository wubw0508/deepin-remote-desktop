## 遗留事项汇总
### UI 任务
- greeter、锁屏
- 任务栏插件
- 控制中心
- 用户准入确认
- 关闭桌面共享的确认弹窗
### 调研任务
- h264编码：使用 freerdp 库的 h264 编码，参考 freerdp-shadow-cli3；
- 硬件加速：参考 gnome-remote-desktop，如何将编码后的数据整理成 freerdp 的数据格式；
- h264 和 RemoteFX 自动切换方案；
- 光标处理：目前客户端的光标是固定显示，不会变化；
- 远程登录、单点登录适配 mstsc；
- 网络探测和流量、画质控制；
- 剪切板共享和文件共享：低优先级；
- 音频和麦克风功能：低优先级；
- TLS 国密支持：低优先级；
### 方案实施
- 桌面共享多会话管理；
- 按照设计方案实现远程登录和修改 lightdm；
- lightdm 的 DISPLAY 管理和动态生成虚拟屏幕配置；
- 多屏管理；
- 键盘事件功能完善：直接参考freerdp-shadow-cli3；
- 提供给前端的 DBus 接口与属性(system/session)；
- 随机用户名、密码生成器；
- 单点登录认证以及通过 lightdm 开启会话；
- 远程会话重入；
- 桌面共享支持一次性密钥，连接后自动更新；
- 端口号可配置以及动态调整；
- 本地登录与远程登录冲突处理；
- 桌面共享本地键鼠优先级高于 XTest 输入；
- 桌面共享无密码连接，使用弹窗确认；
- 桌面共享暂停时的处理；
- 配置文件改用drop-in的方式可覆盖可定制；
- 桌面共享的密码放到 keyring 中(待定)；
- 远程登录时分辨率自动切换；
- 代码结构优化：参考 freerdp-shadow-cli3；
- V20 部署测试；
### 方案优化
- 阻止自动待机与休眠；
- 可配置远程登录断开连接后注销；
- 支持无用户名场景；
- greeter 切换用户时，允许切换到已经登录的用户上；
- 远程登录开关等操作鉴权；
- 桌面共享时的通知；
- 桌面共享中的仅屏幕共享模式 view only；
- tls证书自动生成；
- 修复分辨率切换进程崩溃问题：直接参考freerdp-shadow-cli3；
- systemd 配置规范化
- 远程登录中polkit在远程会话下的支持，需要通过pkla和rules批量进行覆盖；
- greeter 第一帧显示是黑的或者花的，尝试修复；
- 在 greeter 界面就断开连接，那么需要自动关闭会话；