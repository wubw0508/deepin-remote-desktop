## 遗留事项汇总

### 核心功能点
1. 适配其他版本的remmina和其他rdp客户端；
2. lightdm支持单点登录；
3. 音频下行和麦克风回传；
4. 剪切板共享和文件共享；
5. 网络探测和流量、画质控制；
6. 性能优化；
   1. 捕获；
   2. 编码；
   3. 差分计算；
   4. 虚拟屏幕方案；
7. H264编码；
8. 硬件加速；
9. 适配wayland；
10. 其他外设共享；


### 细节功能点
1. 键盘事件功能完善；
2. tls证书自动生成；
3. 配置文件改用drop-in的方式，默认配置在/usr/share/deepin-remote-desktop下，覆盖配置在/var/lib/deepin-remote-desktop下；
4. 连接安全：
   1. 桌面共享，可以使用无密码方式，使用弹窗确认，此时使用tls；
   2. 桌面共享，可以使用NLA密码的方式连接； Done
   3. 远程登录，Greeter登录方案，使用NLA密码连接； Done
   4. 远程单点登录，使用TLS,那用户名和密码去做pam认证；
5. 桌面共享时应该使用本地的分辨率来捕获和传输；
6. 远程登录时应该使用客户端要求的分辨率来生成虚拟屏幕；
7. 桌面共享中的仅屏幕共享模式 view only；
8. 远程登录中polkit在远程会话下的支持，可能需要批量进行覆盖，通过pkla和rules；
9. 远程登录、桌面共享需要抑制锁；
10. 远程登录时，如果尝试登录一个本地已经登录的账户，可以进入本地账户的远程共享，然后提示用户保存文档后进行注销，然后再远程登录该账户；
11. --user进程需要配置自启动;
12. 远程登录中部分功能可能需要禁用；
13. 其他例如greeter的提示和交互；
14. 远程登录场景，需要禁止本地的生物认证；
15. greeter优雅的启动handover方式；以及两个handover进程的生命周期优化；
16. 修复运行时警告；
17. 远程登录断开连接后注销；
18. 需要支持无用户名场景
19. 远程登录禁止切换用户；、
20. 多会话和会话重入管理：
    1.  lightdm remote session 需要sessionid和clientid；需要给出一个详细的方案
    2.  system监听remote session的sessionid change信号，system进程的object不变，dm的session可以变；
    3.  重复登录时，lightdm不能再次open session
    4.  远程登录时，无法切换到已经登录的用户：远程会话如何重入；需要lightdm配合，以及使用restarthandover信号；
    5.  多个会话开启桌面共享时，端口号自动累加；

## 主要模块
1. 客户端连接管理
2. 采集管理
3. 编码与传输管理
4. 输入事件管理
5. 连接安全管理
6. 服务重定向管理
7. 远程会话管理(需要包含会话可重入)
8. 远程会话权限控制
9.  配置与隐私管理
10. 进程管理
11. UI模块管理(greeter 控制中心 任务栏)
12. 音频管理 TODO
13. 剪切板管理 TODO
14. 网络探测与流量控制 TODO
15. 硬件加速 TODO
16. 外设共享管理 TODO

## 关键流程
1. 桌面共享流程
2. 远程greeter登录
3. 远程单点登录
