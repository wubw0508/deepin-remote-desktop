## 遗留事项汇总

### 核心功能点
1. 适配其他版本的remmina和其他rdp客户端；
2. lightdm支持单点登录；
3. 音频下行和麦克风回传；
4. 剪切板共享和文件共享；
5. 网络探测和流量、画质控制；
6. 性能优化；
   1. 捕获；
   2. 编码；
   3. 差分计算；
   4. 虚拟屏幕方案；
7. H264编码；
8. 硬件加速；
9. 适配wayland；
10. 其他外设共享；


### 细节功能点
#### deepin-remote-desktop
1. 键盘事件功能完善；
2. tls证书自动生成；
3. 配置文件改用drop-in的方式，默认配置在/usr/share/deepin-remote-desktop下，覆盖配置在/var/lib/deepin-remote-desktop下；
4. 连接安全：
   1. 桌面共享，可以使用无密码方式，使用弹窗确认，此时使用tls；
   2. 桌面共享，可以使用NLA密码的方式连接； Done
   3. 远程登录，Greeter登录方案，使用NLA密码连接； Done
   4. 远程单点登录，使用TLS,那用户名和密码去做pam认证；
5. 桌面共享时应该使用本地的分辨率来捕获和传输；
6. 远程登录时应该使用客户端要求的分辨率来生成虚拟屏幕；
7. 桌面共享中的仅屏幕共享模式 view only；
8. 远程登录、桌面共享需要抑制锁；
9. greeter优雅的启动handover方式；以及两个handover进程的生命周期优化；
10. 可配置远程登录断开连接后注销；
11. 支持无用户名场景；
12. 修复运行时警告；
13. 客户端多屏场景；
14. 远程登录中polkit在远程会话下的支持，可能需要批量进行覆盖，通过pkla和rules；
15. systemd 服务配置；
16. 桌面共享分辨率切换时，应该发 redirect pdu 让客户端重连；
17. 多会话和会话重入管理：
    1.  lightdm remote session 需要sessionid和clientid；需要给出一个详细的方案
    2.  system监听remote session的sessionid change信号，system进程的object不变，dm的session可以变；
    3.  重复登录时，lightdm不能再次open session
    4.  远程登录时，无法切换到已经登录的用户：远程会话如何重入；需要lightdm配合，以及使用restarthandover信号；
    5.  多个会话开启桌面共享时，端口号自动累加；
18. greeter 第一帧显示是黑的或者花的，可能需要让 system 进程先传一帧
19. 光标处理，目前在客户端看到的光标不会变化；
20. 桌面共享多会话场景；
21. greeter 切换用户时，允许切换到已经登录的用户上；
22. 桌面共享暂停场景；

#### other

1. 远程登录时，如果尝试登录一个本地已经登录的账户，可以进入本地账户的远程共享，然后提示用户保存文档后进行注销，然后再远程登录该账户；
2. 远程登录中部分功能可能需要禁用；
3. 其他例如greeter的提示和交互；
4. 远程登录场景，需要禁止本地的非密码和非扫码认证；
5. 远程登录禁止切换用户；